!function(r){function n(r){return r}function t(r,n){for(var t=0,e=n.length,u=Array(e);e>t;++t)u[t]=r[n[t]];return u}function e(r){function n(n,t,e,u){for(;u>e;){var o=e+u>>>1;r(n[o])<t?e=o+1:u=o}return e}function t(n,t,e,u){for(;u>e;){var o=e+u>>>1;t<r(n[o])?u=o:e=o+1}return e}return t.right=t,t.left=n,t}function u(r){function n(r,n,t){for(var u=t-n,o=(u>>>1)+1;--o>0;)e(r,o,u,n);return r}function t(r,n,t){for(var u,o=t-n;--o>0;)u=r[n],r[n]=r[n+o],r[n+o]=u,e(r,1,o,n);return r}function e(n,t,e,u){for(var o,f=n[--u+t],i=r(f);(o=t<<1)<=e&&(e>o&&r(n[u+o])>r(n[u+o+1])&&o++,!(i<=r(n[u+o])));)n[u+t]=n[u+o],t=o;n[u+t]=f}return n.sort=t,n}function o(r){function n(n,e,u,o){var f,i,a,c,l=Array(o=Math.min(u-e,o));for(i=0;o>i;++i)l[i]=n[e++];if(t(l,0,o),u>e){f=r(l[0]);do(a=r(c=n[e])>f)&&(l[0]=c,f=r(t(l,0,o)[0]));while(++e<u)}return l}var t=u(r);return n}function f(r,n){function t(n,t,u){for(var o=t+1;u>o;++o){for(var f=o,i=n[o],a=r(i);f>t&&e(r(n[f-1]),a);--f)n[f]=n[f-1];n[f]=i}return n}n||(n=S);var e=n.gt;return t}function i(r,n){n||(n=S);var t=n.name;return t in C||(C[t]=c(n)),C[t](r,n)}function a(r){if("object"==typeof r){var n=[];for(var t in r)n.push(JSON.stringify(t)+": "+a(r[t]));return"{\n"+n.join(",\n")+"\n}"}return"string"==typeof r?JSON.stringify(r):""+r}function c(r){var n="";n+="var comparisonOperators = "+a(r)+";\n",n+=""+f+"\n";var t=""+l,e=t.indexOf("{"),u=t.lastIndexOf("}");return n+=t.substr(e+1,u-e-1),Function("f",n)}function l(r,n){function t(r,n,t){return(l>t-n?u:e)(r,n,t)}function e(n,e,u){var f,l=0|(u-e)/6,v=e+l,s=u-1-l,h=e+u-1>>1,d=h-l,p=h+l,g=n[v],y=r(g),m=n[d],O=r(m),b=n[h],x=r(b),w=n[p],k=r(w),A=n[s],E=r(A);i(y,O)&&(f=g,g=m,m=f,f=y,y=O,O=f),i(k,E)&&(f=w,w=A,A=f,f=k,k=E,E=f),i(y,x)&&(f=g,g=b,b=f,f=y,y=x,x=f),i(O,x)&&(f=m,m=b,b=f,f=O,O=x,x=f),i(y,k)&&(f=g,g=w,w=f,f=y,y=k,k=f),i(x,k)&&(f=b,b=w,w=f,f=x,x=k,k=f),i(O,E)&&(f=m,m=A,A=f,f=O,O=E,E=f),i(O,x)&&(f=m,m=b,b=f,f=O,O=x,x=f),i(k,E)&&(f=w,w=A,A=f,f=k,k=E,E=f);var N=m,S=O,M=w,U=k;n[v]=g,n[d]=n[e],n[h]=b,n[p]=n[u-1],n[s]=A;var j=e+1,z=u-2,C=a(S,U)&&c(S,U);if(C)for(var J=j;z>=J;++J){var F=n[J],q=r(F);if(S>q)J!==j&&(n[J]=n[j],n[j]=F),++j;else if(q>S)for(;;){var I=r(n[z]);{if(!(I>S)){if(S>I){n[J]=n[j],n[j++]=n[z],n[z--]=F;break}n[J]=n[z],n[z--]=F;break}z--}}}else for(var J=j;z>=J;J++){var F=n[J],q=r(F);if(o(q,S))J!==j&&(n[J]=n[j],n[j]=F),++j;else if(i(q,U))for(;;){var I=r(n[z]);{if(!i(I,U)){o(I,S)?(n[J]=n[j],n[j++]=n[z],n[z--]=F):(n[J]=n[z],n[z--]=F);break}if(z--,J>z)break}}}if(n[e]=n[j-1],n[j-1]=N,n[u-1]=n[z+1],n[z+1]=M,t(n,e,j-1),t(n,z+2,u),C)return n;if(v>j&&z>s){for(var R,I;(R=r(n[j]))<=S&&R>=S;)++j;for(;(I=r(n[z]))<=U&&I>=U;)--z;for(var J=j;z>=J;J++){var F=n[J],q=r(F);if(S>=q&&q>=S)J!==j&&(n[J]=n[j],n[j]=F),j++;else if(U>=q&&q>=U)for(;;){var I=r(n[z]);{if(!(U>=I&&I>=U)){S>I?(n[J]=n[j],n[j++]=n[z],n[z--]=F):(n[J]=n[z],n[z--]=F);break}if(z--,J>z)break}}}}return t(n,j,z+1)}var u=f(r,n),o=n.lt,i=n.gt,a=n.lte,c=n.gte,l=32;return function(e,u,o){if(e.length>0&&"native"==n.name){var f=r(e[0]);f&&"object"==typeof f.valueOf()?(console.warn("Using non primitive data in dimensions with native comparison operators is slow. Consider providing custom comparison functions in .dimenension() call."),console.warn("The non primitive value was: %s",JSON.stringify(r(e[0]).valueOf()))):void 0===f&&console.warn("Sorting key function returned undefined for the data element %s.",e[0])}return t(e,u,o)}}function v(r){for(var n=Array(r),t=-1;++t<r;)n[t]=0;return n}function s(r,n){for(var t=r.length;n>t;)r[t++]=0;return r}function h(r,n){if(n>32)throw Error("invalid array width!");return r}function d(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function p(r,n){var t=n[0],e=n[1];return function(n){var u=n.length;return[r.left(n,t,0,u),r.left(n,e,0,u)]}}function g(r){return[0,r.length]}function y(){return null}function m(){return 0}function O(r){return r+1}function b(r){return r-1}function x(r){return function(n,t){return n+ +r(t)}}function w(r){return function(n,t){return n-r(t)}}function k(){function r(r){var n=s,t=r.length;return t&&(v=v.concat(r),U=R(U,s+=t),z.forEach(function(e){e(r,n,t)})),l}function e(){for(var r=A(s,s),n=[],t=0,e=0;s>t;++t)U[t]?r[t]=e++:n.push(t);j.forEach(function(r){r(0,[],n)}),C.forEach(function(n){n(r)});for(var u,t=0,e=0;s>t;++t)(u=U[t])&&(t!==e&&(U[e]=u,v[e]=v[t]),++e);for(v.length=e;s>e;)U[--s]=0}function f(r,e){function f(n,e,u){X=n.map(r),Y=tn(E(u),0,u),X=t(X,Y);var o,f=en(X),i=f[0],a=f[1];if(Z)for(o=0;u>o;++o)Z(X[o],o)||(U[Y[o]+e]|=rn);else{for(o=0;i>o;++o)U[Y[o]+e]|=rn;for(o=a;u>o;++o)U[Y[o]+e]|=rn}if(!e)return V=X,W=Y,fn=i,an=a,void 0;var c=V,l=W,v=0,h=0;for(V=Array(s),W=A(s,s),o=0;e>v&&u>h;++o)c[v]<X[h]?(V[o]=c[v],W[o]=l[v++]):(V[o]=X[h],W[o]=Y[h++]+e);for(;e>v;++v,++o)V[o]=c[v],W[o]=l[v];for(;u>h;++h,++o)V[o]=X[h],W[o]=Y[h]+e;f=en(V),fn=f[0],an=f[1]}function a(r,n,t){un.forEach(function(r){r(X,Y,n,t)}),X=Y=null}function c(r){for(var n,t=0,e=0;s>t;++t)U[n=W[t]]&&(t!==e&&(V[e]=V[t]),W[e]=r[n],++e);for(V.length=e;s>e;)W[e++]=0;var u=en(V);fn=u[0],an=u[1]}function l(r){var n=r[0],t=r[1];if(Z)return Z=null,D(function(r,e){return e>=n&&t>e}),fn=n,an=t,Q;var e,u,o,f=[],i=[];if(fn>n)for(e=n,u=Math.min(fn,t);u>e;++e)U[o=W[e]]^=rn,f.push(o);else if(n>fn)for(e=fn,u=Math.min(n,an);u>e;++e)U[o=W[e]]^=rn,i.push(o);if(t>an)for(e=Math.max(n,an),u=t;u>e;++e)U[o=W[e]]^=rn,f.push(o);else if(an>t)for(e=Math.max(fn,t),u=an;u>e;++e)U[o=W[e]]^=rn,i.push(o);return fn=n,an=t,j.forEach(function(r){r(rn,f,i)}),Q}function J(r){return null==r?I():Array.isArray(r)?q(r):"function"==typeof r?B(r):F(r)}function F(r){return l((en=d(M,r))(V))}function q(r){return l((en=p(M,r))(V))}function I(){return l((en=g)(V))}function B(r){return en=g,D(Z=r),fn=0,an=s,Q}function D(r){var n,t,e,u=[],o=[];for(n=0;s>n;++n)!(U[t=W[n]]&rn)^!!(e=r(V[n],n))&&(e?(U[t]&=nn,u.push(t)):(U[t]|=rn,o.push(t)));j.forEach(function(r){r(rn,u,o)})}function G(r){for(var n,t=[],e=an;--e>=fn&&r>0;)U[n=W[e]]||(t.push(v[n]),--r);return t}function H(r){for(var n,t=[],e=fn;an>e&&r>0;)U[n=W[e]]||(t.push(v[n]),--r),e++;return t}function K(r){function t(n,t,e,u){function o(){++L===K&&(b=T(b,H<<=1),F=T(F,H),K=N(H))}var l,h,d,p,g,m,O=J,b=A(L,K),x=B,w=G,k=L,E=0,S=0;for(X&&(x=w=y),J=Array(L),L=0,F=k>1?R(F,s):A(s,K),k&&(d=(h=O[0]).key);u>S&&!_(p=r(n[S]),p);)++S;for(;u>S;){for(h&&p>=d?(g=h,m=d,b[E]=L,(h=O[++E])&&(d=h.key)):(g={key:p,value:w()},m=p),J[L]=g;!($(p,m)||(F[l=t[S]+e]=L,U[l]&nn||(g.value=x(g.value,v[l])),++S>=u));)p=r(n[S]);o()}for(;k>E;)J[b[E]=L]=O[E++],o();if(L>E)for(E=0;e>E;++E)F[E]=b[F[E]];l=j.indexOf(P),L>1?(P=f,Q=a):(!L&&Y&&(L=1,J=[{key:null,value:w()}]),1===L?(P=i,Q=c):(P=y,Q=y),F=null),j[l]=P}function e(){if(L>1){for(var r=L,n=J,t=A(r,r),e=0,u=0;s>e;++e)U[e]&&(t[F[u]=F[e]]=1,++u);for(J=[],L=0,e=0;r>e;++e)t[e]&&(t[e]=L++,J.push(n[e]));if(L>1)for(var e=0;u>e;++e)F[e]=t[F[e]];else F=null;j[j.indexOf(P)]=L>1?(Q=a,P=f):1===L?(Q=c,P=i):Q=P=y}else if(1===L){if(Y)return;for(var e=0;s>e;++e)if(U[e])return;J=[],L=0,j[j.indexOf(P)]=P=Q=y}}function f(r,n,t){if(r!==rn&&!X){var e,u,o,f;for(e=0,o=n.length;o>e;++e)U[u=n[e]]&nn||(f=J[F[u]],f.value=B(f.value,v[u]));for(e=0,o=t.length;o>e;++e)(U[u=t[e]]&nn)===r&&(f=J[F[u]],f.value=D(f.value,v[u]))}}function i(r,n,t){if(r!==rn&&!X){var e,u,o,f=J[0];for(e=0,o=n.length;o>e;++e)U[u=n[e]]&nn||(f.value=B(f.value,v[u]));for(e=0,o=t.length;o>e;++e)(U[u=t[e]]&nn)===r&&(f.value=D(f.value,v[u]))}}function a(){var r,n;for(r=0;L>r;++r)J[r].value=G();for(r=0;s>r;++r)U[r]&nn||(n=J[F[r]],n.value=B(n.value,v[r]))}function c(){var r,n=J[0];for(n.value=G(),r=0;s>r;++r)U[r]&nn||(n.value=B(n.value,v[r]))}function l(){return X&&(Q(),X=!1),J}function h(r){var n=q(l(),0,J.length,r);return I.sort(n,0,n.length)}function d(r,n,t){return B=r,D=n,G=t,X=!0,z}function p(){return d(O,b,m)}function g(r){return d(x(r),w(r),m)}function k(r){function n(n){return r(n.value)}return q=o(n),I=u(n),z}function E(){return k(n)}function S(){return L}function M(){var r=j.indexOf(P);return r>=0&&j.splice(r,1),r=un.indexOf(t),r>=0&&un.splice(r,1),r=C.indexOf(e),r>=0&&C.splice(r,1),z}var z={top:h,all:l,reduce:d,reduceCount:p,reduceSum:g,order:k,orderNatural:E,size:S,dispose:M,remove:M};on.push(z);var J,F,q,I,B,D,G,H=8,K=N(H),L=0,P=y,Q=y,X=!0,Y=r===y;return arguments.length<1&&(r=n),j.push(P),un.push(t),C.push(e),t(V,W,0,s),p().orderNatural()}function L(){var r=K(y),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function P(){on.forEach(function(r){r.dispose()});var r=z.indexOf(f);return r>=0&&z.splice(r,1),r=z.indexOf(a),r>=0&&z.splice(r,1),r=C.indexOf(c),r>=0&&C.splice(r,1),h&=nn,I()}var Q={filter:J,filterExact:F,filterRange:q,filterFunction:B,filterAll:I,top:G,bottom:H,group:K,groupAll:L,dispose:P,remove:P};e||(e=S);var V,W,X,Y,Z,$=e.gt,_=e.gte,rn=~h&-~h,nn=~rn,tn=i(function(r){return X[r]},e),en=g,un=[],on=[],fn=0,an=0;return z.unshift(f),z.push(a),C.push(c),h|=rn,(k>=32?!rn:h&-(1<<k))&&(U=T(U,k<<=1)),f(v,0,s),a(v,0,s),Q}function a(){function r(r,n){var t;if(!p)for(t=n;s>t;++t)U[t]||(a=c(a,v[t]))}function n(r,n,t){var e,u,o;if(!p){for(e=0,o=n.length;o>e;++e)U[u=n[e]]||(a=c(a,v[u]));for(e=0,o=t.length;o>e;++e)U[u=t[e]]===r&&(a=l(a,v[u]))}}function t(){var r;for(a=h(),r=0;s>r;++r)U[r]||(a=c(a,v[r]))}function e(r,n,t){return c=r,l=n,h=t,p=!0,d}function u(){return e(O,b,m)}function o(r){return e(x(r),w(r),m)}function f(){return p&&(t(),p=!1),a}function i(){var t=j.indexOf(n);return t>=0&&j.splice(t),t=z.indexOf(r),t>=0&&z.splice(t),d}var a,c,l,h,d={reduce:e,reduceCount:u,reduceSum:o,value:f,dispose:i,remove:i},p=!0;return j.push(n),z.push(r),r(v,0,s),u()}function c(){return s}var l={add:r,remove:e,dimension:f,groupAll:a,size:c},v=[],s=0,h=0,k=8,U=F(0),j=[],z=[],C=[];return arguments.length?r(arguments[0]):l}function A(r,n){return(257>n?F:65537>n?q:I)(r)}function E(r){for(var n=A(r,r),t=-1;++t<r;)n[t]=t;return n}function N(r){return 8===r?256:16===r?65536:4294967296}k.version="1.3.12";var S={name:"native",lt:function(r,n){return n>r},lte:function(r,n){return n>=r},gt:function(r,n){return r>n},gte:function(r,n){return r>=n}};k.permute=t;var M=k.bisect=e(n);M.by=e;var U=k.heap=u(n);U.by=u;var j=k.heapselect=o(n);j.by=o;var z=k.insertionsort=f(n);z.by=f;var C={},J=k.quicksort=i(n,S);J.by=i;var F=v,q=v,I=v,R=s,T=h;"undefined"!=typeof Uint8Array&&(F=function(r){return new Uint8Array(r)},q=function(r){return new Uint16Array(r)},I=function(r){return new Uint32Array(r)},R=function(r,n){if(r.length>=n)return r;var t=new r.constructor(n);return t.set(r),t},T=function(r,n){var t;switch(n){case 16:t=q(r.length);break;case 32:t=I(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),r.crossfilter=k}("undefined"!=typeof exports&&exports||this);